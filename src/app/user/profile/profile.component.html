<div class="progress-spinner" *ngIf="isLoading">
  <p-progressSpinner></p-progressSpinner>
</div>
<div>
  <p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
  <p-toast position="top-center"></p-toast>
</div>
<div class="trackPage">
  <div class="container">
    <p-card>
      <div class="">
        <span class="welcomeText">Личный кабинет</span>
      </div>
      <!--      <div class="mt-3">-->
      <!--        <p-button (click)="openDialog()" label="Добавить трек номер" icon="pi pi-plus" iconPos="left"></p-button>-->
      <!--      </div>-->
    </p-card>
    <div class="mt-4">
      <p-card>
        <form (ngSubmit)="onSubmit()" [formGroup]="userForm">
          <div class="loginForm container">
            <div class="p-float-label w-100 mt-3">
              <input [readOnly]="!onEditing" class="form-control" id="float-input" type="text" pInputText formControlName="username" name="login">
              <label for="float-input">Логин</label>
            </div>
            <div class="p-float-label w-100 mt-4">
              <input [readOnly]="!onEditing" class="form-control" id="name" type="text" pInputText formControlName="name" name="name">
              <label for="name">Имя</label>
            </div>
            <div class="p-float-label w-100 mt-4">
              <input [readOnly]="!onEditing" class="form-control" id="surname" type="text" pInputText formControlName="surname" name="surname">
              <label for="surname">Фамилия</label>
            </div>
            <div class="p-float-label w-100 mt-4">
              <input [readOnly]="!onEditing" class="form-control" id="mail" type="mail" pInputText formControlName="mail" name="mail">
              <label for="mail">Почта</label>
            </div>
            <div *ngIf="!onEditing" class="p-float-label w-100 mt-4 mb-4">
              <input readonly formControlName="phoneNumber" type="text" pInputText>
              <label>Номер телефона</label>
            </div>
            <div *ngIf="onEditing" class="p-float-label w-100 mt-4 mb-4" >
              <p-inputMask formControlName="phoneNumber" mask="+9 (999) 999-99-99"></p-inputMask>
              <label>Номер телефона</label>
            </div>
            <div>
              <button *ngIf="onEditing" pButton type="submit">Сохранить</button>
              <button *ngIf="onEditing" (click)="cancelForm()" pButton class="p-button-raised p-button-secondary mx-2">Отмена</button>
            </div>
            <p-button *ngIf="!onEditing" (click)="onEditing = true" label="Изменить" icon="pi pi-pencil"></p-button>
          </div>
        </form>
      </p-card>
    </div>
    <div class="mt-4">
      <p-card>
        <div class="loginForm container">
          <div class="mb-2">
            <span style="font-size: 16px; color: gray">*Пароль должен быть от 3 до 18 символов</span>
          </div>
          <form (ngSubmit)="changePassword()" [formGroup]="passwordForm">
            <div class="p-float-label w-100 mt-4">
              <input class="form-control" id="currentPassword" type="password" pInputText formControlName="currentPassword" name="currentPassword">
              <label for="float-input">Текущий пароль</label>
            </div>
            <div class="p-float-label w-100 mt-4 mb-4">
              <input class="form-control" id="newPassword" type="password" pInputText formControlName="newPassword" name="newPassword">
              <label for="float-input">Новый пароль</label>
            </div>
            <div class="p-float-label w-100 mt-4 mb-4">
              <input class="form-control" id="newPassword2" type="password" pInputText formControlName="confirmPassword" name="newPassword">
              <label for="float-input">Повторите новый пароль</label>
            </div>
            <p-button class="mt-4" type="submit" label="Изменить пароль" icon="pi pi-lock"></p-button>
          </form>
        </div>
      </p-card>
    </div>

  </div>
</div>
