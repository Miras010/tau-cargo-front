<div class="progress-spinner" *ngIf="isLoading">
  <p-progressSpinner></p-progressSpinner>
</div>
<div>
  <p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
  <p-toast position="top-center"></p-toast>
</div>
<div class="trackPage">
  <div class="container">
    <p-card>
      <div class="">
        <span class="welcomeText">Общее кол-во треков: {{ totalTracks }}</span>
      </div>
      <div class="mt-3">
        <p-button (click)="openDialog()" label="Добавить трек номер" icon="pi pi-plus" iconPos="left"></p-button>
      </div>
    </p-card>
    <div *ngFor="let item of data">
      <div class="mt-3">
        <div class="mt-2 trackCard">
          <div class="cardHeader" [style]="getBackground(item)">
            <span class="cardTitle">{{ item.track.trackNumber }}</span>
            <div>
              <i (click)="deleteTrack(item)" class="pi pi-trash" style="font-size: 25px; cursor: pointer;"></i>
            </div>
          </div>
          <div class="cardBody">
            <div>
              <span class="cardDesc">{{ item.description }}</span>
            </div>
            <div class="cardSec mt-3">
              <div class="iconSec">
                <i *ngIf="item.track.receivedInChinaDate" class="pi pi-check-circle" style="font-size: 25px"></i>
                <i *ngIf="!item.track.receivedInChinaDate" class="pi pi-circle" style="font-size: 25px"></i>
              </div>
              <div class="cardSubTitle">
                <span>Получено на складе в Китае:</span><br>
                <span>{{ item.track.receivedInChinaDate ? getFormattedDate(item.track.receivedInChinaDate) : ''  }}</span>
              </div>
            </div>
            <div class="cardSec mt-1">
              <div class="iconSec">
                <i *ngIf="item.track.fromChinaToAlmaty" class="pi pi-check-circle" style="font-size: 25px"></i>
                <i *ngIf="!item.track.fromChinaToAlmaty" class="pi pi-circle" style="font-size: 25px"></i>
              </div>
              <div class="cardSubTitle">
                <span>Отправлено с Китая в Алматы:</span><br>
                <span>{{ item.track.fromChinaToAlmaty ? getFormattedDate(item.track.fromChinaToAlmaty) : ''  }}</span>
              </div>
            </div>
            <div class="cardSec mt-1">
              <div class="iconSec">
                <i *ngIf="item.track.receivedInAlmatyDate" class="pi pi-check-circle" style="font-size: 25px"></i>
                <i *ngIf="!item.track.receivedInAlmatyDate" class="pi pi-circle" style="font-size: 25px"></i>
              </div>
              <div class="cardSubTitle">
                <span>Получено на складе в Алматы:</span><br>
                <span>{{ item.track.receivedInAlmatyDate ? getFormattedDate(item.track.receivedInAlmatyDate) : ''  }}</span>
              </div>
            </div>
            <div *ngIf="item.track.shippedFromAlmatyDate" class="cardSec mt-1">
              <div class="iconSec">
                <i *ngIf="item.track.shippedFromAlmatyDate" class="pi pi-check-circle" style="font-size: 25px"></i>
                <i *ngIf="!item.track.shippedFromAlmatyDate" class="pi pi-circle" style="font-size: 25px"></i>
              </div>
              <div class="cardSubTitle">
                <span>Отправлено из Алматы в город назначения:</span><br>
                <span>{{ item.track.shippedFromAlmatyDate ? getFormattedDate(item.track.shippedFromAlmatyDate) : ''  }}</span>
              </div>
            </div>
            <div class="cardSec mt-1">
              <div class="iconSec">
                <i *ngIf="item.track.receivedByClient" class="pi pi-check-circle" style="font-size: 25px"></i>
                <i *ngIf="!item.track.receivedByClient" class="pi pi-circle" style="font-size: 25px"></i>
              </div>
              <div class="cardSubTitle">
                <span>Получено клиентом:</span><br>
                <span>{{ item.track.receivedByClient ? getFormattedDate(item.track.receivedByClient) : '' }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
